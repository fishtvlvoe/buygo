import{r as d,b as c,w as B,d as T,c as l,a as e,m as p,k as m,t as r,i as C,v as E,g as N,F as $,l as D,J as S,o as a}from"./main-Ctnj_la1.js";const F={class:"space-y-6 pt-2"},I={class:"bg-white shadow-sm rounded-xl border border-gray-200 px-6 py-4"},U={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},q={class:"flex space-x-1","aria-label":"Tabs"},A={class:"ml-2 py-0.5 px-2 rounded-full text-xs font-semibold bg-white border border-gray-200 text-gray-600"},H={key:0,class:"ml-2 py-0.5 px-2 rounded-full text-xs font-semibold bg-white border border-green-100 text-green-600"},J={key:1,class:"ml-2 py-0.5 px-2 rounded-full text-xs font-medium bg-gray-100 text-gray-500"},Q={key:0,class:"ml-2 py-0.5 px-2 rounded-full text-xs font-semibold bg-white border border-orange-100 text-orange-600"},W={key:1,class:"ml-2 py-0.5 px-2 rounded-full text-xs font-medium bg-gray-100 text-gray-500"},X={class:"relative w-full max-w-sm"},G={class:"bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden"},K={class:"overflow-x-auto"},O={class:"min-w-full divide-y divide-gray-200"},R={class:"divide-y divide-gray-200 bg-white"},Y={key:0},Z={key:1},ee={class:"px-3 py-4"},te={class:"flex items-center"},se={class:"h-12 w-12 flex-shrink-0 overflow-hidden rounded-md border border-gray-200 bg-gray-100"},oe=["src"],le={key:1,class:"h-full w-full flex items-center justify-center text-gray-400"},re={class:"ml-3"},ae={class:"text-xs font-medium text-gray-900"},ne={class:"text-xs text-gray-400"},ie={class:"whitespace-nowrap px-3 py-4 text-xs font-medium text-gray-700"},de={class:"whitespace-nowrap px-3 py-4 text-xs"},ue={class:"px-4 py-3 bg-white border-t border-gray-200 sm:px-6 flex flex-col sm:flex-row items-center justify-between gap-4"},ce={class:"flex items-center text-xs text-gray-500 gap-4"},xe={class:"flex items-center gap-2"},ge={class:"flex items-center gap-3"},pe={class:"relative z-0 inline-flex shadow-sm rounded-md"},fe=["disabled"],ye=["disabled"],me={__name:"ProductList",setup(ve){const u=d([]),f=d(!0),h=d(null),n=d("all"),x=d(""),i=d(1),g=d(10),y=c(()=>{let s=u.value;if(n.value==="publish"?s=s.filter(t=>t.status==="publish"):n.value==="draft"&&(s=s.filter(t=>t.status==="draft")),x.value){const t=x.value.toLowerCase();s=s.filter(o=>o.name&&o.name.toLowerCase().includes(t)||o.id&&o.id.toString().includes(t))}return s}),v=c(()=>Math.ceil(y.value.length/g.value)||1),P=c(()=>{const s=(i.value-1)*g.value,t=s+g.value;return y.value.slice(s,t)}),j=()=>{i.value>1&&i.value--},M=()=>{i.value<v.value&&i.value++},L=c(()=>u.value.length),w=c(()=>u.value.filter(s=>s.status==="publish").length),_=c(()=>u.value.filter(s=>s.status==="draft").length),z=s=>{switch(s){case"publish":return"bg-green-50 text-green-700 border-green-200";case"draft":return"bg-orange-50 text-orange-700 border-orange-200";case"pending":return"bg-yellow-50 text-yellow-700 border-yellow-200";default:return"bg-gray-50 text-gray-800 border-gray-200"}};B([n,x],()=>{i.value=1});const V=async()=>{f.value=!0,h.value=null;try{const s=window.buygo_frontend||window.buygo_admin;if(!s||!s.api_url)throw new Error("API Config Missing");const t={"X-WP-Nonce":s.nonce,"Content-Type":"application/json"},o=`${s.api_url}/stats/seller-products`,k=await fetch(o,{headers:t,credentials:"same-origin"});if(!k.ok)throw new Error("Load failed");const b=await k.json();if(b.success)u.value=b.data;else throw new Error(b.message)}catch(s){h.value=s.message,console.error("載入產品失敗:",s)}finally{f.value=!1}};return T(()=>{V()}),(s,t)=>(a(),l("div",F,[e("div",I,[e("div",U,[e("nav",q,[e("button",{onClick:t[0]||(t[0]=o=>n.value="all"),class:p([n.value==="all"?"bg-gray-100 text-gray-900":"text-gray-500 hover:text-gray-700 hover:bg-gray-50","px-3 py-2 font-medium text-sm rounded-md transition-colors flex items-center"])},[t[5]||(t[5]=m(" 全部 ",-1)),e("span",A,r(L.value),1)],2),e("button",{onClick:t[1]||(t[1]=o=>n.value="publish"),class:p([n.value==="publish"?"bg-green-50 text-green-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-50","px-3 py-2 font-medium text-sm rounded-md transition-colors flex items-center"])},[t[6]||(t[6]=m(" 已發布 ",-1)),w.value>0?(a(),l("span",H,r(w.value),1)):(a(),l("span",J,"0"))],2),e("button",{onClick:t[2]||(t[2]=o=>n.value="draft"),class:p([n.value==="draft"?"bg-orange-50 text-orange-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-50","px-3 py-2 font-medium text-sm rounded-md transition-colors flex items-center"])},[t[7]||(t[7]=m(" 草稿 ",-1)),_.value>0?(a(),l("span",Q,r(_.value),1)):(a(),l("span",W,"0"))],2)]),e("div",X,[t[8]||(t[8]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("svg",{class:"h-4 w-4 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),C(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>x.value=o),class:"block w-full rounded-md border-gray-300 pl-10 focus:border-gray-900 focus:ring-gray-900 text-sm py-2 placeholder-gray-400 shadow-sm",placeholder:"搜尋商品名稱..."},null,512),[[E,x.value]])])])]),e("div",G,[e("div",K,[e("table",O,[t[13]||(t[13]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"},"商品"),e("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"},"價格"),e("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"},"狀態"),e("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"},"庫存"),e("th",{scope:"col",class:"relative py-3 pl-3 pr-4 sm:pr-6"},[e("span",{class:"sr-only"},"操作")])])],-1)),e("tbody",R,[f.value&&u.value.length===0?(a(),l("tr",Y,[...t[9]||(t[9]=[e("td",{colspan:"5",class:"py-12 text-center text-gray-500"},[e("span",{class:"text-xs"},"載入中...")],-1)])])):y.value.length===0&&!f.value?(a(),l("tr",Z,[...t[10]||(t[10]=[e("td",{colspan:"5",class:"py-12 text-center text-gray-500 text-xs"}," 尚無商品資料 ",-1)])])):N("",!0),(a(!0),l($,null,D(P.value,o=>(a(),l("tr",{key:o.id,class:"hover:bg-gray-50 transition-colors"},[e("td",ee,[e("div",te,[e("div",se,[o.image?(a(),l("img",{key:0,src:o.image,class:"h-full w-full object-cover"},null,8,oe)):(a(),l("div",le,[...t[11]||(t[11]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])]))]),e("div",re,[e("div",ae,r(o.name),1),e("div",ne,"ID: "+r(o.id),1)])])]),e("td",ie,r(o.formatted_price),1),e("td",de,[e("span",{class:p(["inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-medium border",z(o.status)])},r(o.status_label),3)]),e("td",{class:p(["whitespace-nowrap px-3 py-4 text-xs",o.stock_status==="缺貨"?"text-red-500 font-medium":"text-gray-600"])},r(o.stock_status),3),t[12]||(t[12]=e("td",{class:"whitespace-nowrap py-4 pl-3 pr-4 text-left text-xs font-medium sm:pr-6"},[e("button",{class:"text-white bg-gray-900 hover:bg-black border border-transparent px-3 py-1.5 rounded text-xs transition-colors shadow-sm"}," 查看 ")],-1))]))),128))])])]),e("div",ue,[e("div",ce,[e("span",null,"第 "+r(i.value)+" 頁，共 "+r(v.value)+" 頁",1),e("div",xe,[t[15]||(t[15]=e("span",null,"每頁",-1)),C(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>g.value=o),class:"form-select text-xs border-gray-300 rounded focus:ring-black focus:border-black py-1 pl-2 pr-6 border"},[...t[14]||(t[14]=[e("option",{value:10},"10",-1),e("option",{value:20},"20",-1),e("option",{value:50},"50",-1),e("option",{value:100},"100",-1)])],512),[[S,g.value]]),t[16]||(t[16]=e("span",null,"筆",-1))]),e("span",null,"總計 "+r(y.value.length)+" 筆",1)]),e("div",ge,[e("div",pe,[e("button",{type:"button",onClick:j,disabled:i.value===1,class:"relative inline-flex items-center px-4 py-1.5 rounded-l-md border border-gray-300 bg-white text-xs font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-black focus:border-black disabled:opacity-50 disabled:cursor-not-allowed"}," 上一頁 ",8,fe),e("button",{type:"button",onClick:M,disabled:i.value===v.value,class:"relative -ml-px inline-flex items-center px-4 py-1.5 rounded-r-md border border-gray-300 bg-white text-xs font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-black focus:border-black disabled:opacity-50 disabled:cursor-not-allowed"}," 下一頁 ",8,ye)])])])])]))}};export{me as default};
